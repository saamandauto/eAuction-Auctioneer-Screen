<div class="dialog-overlay" *ngIf="isOpen" (click)="onClose()">
  <div class="dialog" (click)="$event.stopPropagation()">
    <div class="dialog-header">
      <h3>Settings</h3>
      <button class="button button-icon" (click)="onClose()">
        <i class="ri-close-line"></i>
      </button>
    </div>
    <div class="dialog-tabs">
      <button 
        class="tab-button" 
        [class.active]="activeTab === 'general'"
        (click)="activeTab = 'general'">
        General
      </button>
      <button 
        class="tab-button" 
        [class.active]="activeTab === 'shortcuts'"
        (click)="activeTab = 'shortcuts'">
        Keyboard Shortcuts
      </button>
      <button 
        class="tab-button" 
        [class.active]="activeTab === 'localization'"
        (click)="activeTab = 'localization'">
        Localization
      </button>
      <button 
        class="tab-button" 
        [class.active]="activeTab === 'data'"
        (click)="activeTab = 'data'">
        Data Management
      </button>
    </div>
    <div class="dialog-content">
      <div class="tab-content" *ngIf="activeTab === 'general'">
        <div class="setting-item">
          <label class="toggle-label">Show Keyboard Shortcuts</label>
          <label class="toggle">
            <input type="checkbox" [(ngModel)]="showShortcutsInUI" (change)="onToggleShowShortcuts()">
            <span class="slider"></span>
          </label>
        </div>
        <div class="setting-item">
          <label class="toggle-label">Enable Voice Assistant</label>
          <label class="toggle">
            <input type="checkbox" [(ngModel)]="voiceEnabled" (change)="onToggleVoice()">
            <span class="slider"></span>
          </label>
        </div>
        <div class="setting-item">
          <label class="toggle-label">Enable Bid Sounds</label>
          <label class="toggle">
            <input type="checkbox" [(ngModel)]="soundEnabled" (change)="onToggleSound()">
            <span class="slider"></span>
          </label>
        </div>
        <div class="setting-item">
          <label class="toggle-label">Enable Simulated Bidding</label>
          <label class="toggle">
            <input type="checkbox" [(ngModel)]="simulatedBiddingEnabled" (change)="onToggleSimulatedBidding()">
            <span class="slider"></span>
          </label>
        </div>
        <div class="setting-item">
          <label class="toggle-label">Skip Action Confirmations</label>
          <label class="toggle">
            <input type="checkbox" [(ngModel)]="skipConfirmations" (change)="onToggleSkipConfirmations()">
            <span class="slider"></span>
          </label>
        </div>
        <div class="setting-item">
          <label class="toggle-label">Hammer Requires Reserve Met</label>
          <label class="toggle">
            <input type="checkbox" [(ngModel)]="hammerRequiresReserveMet" (change)="onToggleHammerRequiresReserveMet()">
            <span class="slider"></span>
          </label>
        </div>
        <div class="setting-item">
          <label class="form-label">Speech Recognition Sensitivity</label>
          <input type="range" min="0" max="1" step="0.1" [(ngModel)]="speechRecognitionSensitivity" (change)="onSpeechRecognitionSensitivityChanged()" class="sensitivity-slider">
        </div>
        <div class="setting-item">
          <label class="form-label">Preferred Voice</label>
          <select [(ngModel)]="selectedVoice" (change)="onSelectedVoiceChanged()" class="voice-select">
            <option *ngFor="let voice of availableVoices" [value]="voice.id">{{ voice.name }}</option>
          </select>
        </div>
      </div>

      <div class="tab-content shortcuts-section" *ngIf="activeTab === 'shortcuts'">
        <div class="shortcut-list">
          <div class="shortcut-item">
            <span class="shortcut-key"><span class="key">Alt</span>+<span class="key">X</span></span>
            <span class="shortcut-description">Start Lot / Move to Next Lot</span>
          </div>
          <div class="shortcut-item">
            <span class="shortcut-key"><span class="key">Alt</span>+<span class="key">H</span></span>
            <span class="shortcut-description">Hammer</span>
          </div>
          <div class="shortcut-item">
            <span class="shortcut-key"><span class="key">Alt</span>+<span class="key">R</span></span>
            <span class="shortcut-description">Random Bid</span>
          </div>
          <div class="shortcut-item">
            <span class="shortcut-key"><span class="key">Alt</span>+<span class="key">1</span></span>
            <span class="shortcut-description">Bid User 1</span>
          </div>
          <div class="shortcut-item">
            <span class="shortcut-key"><span class="key">Alt</span>+<span class="key">2</span></span>
            <span class="shortcut-description">Bid User 2</span>
          </div>
          <div class="shortcut-item">
            <span class="shortcut-key"><span class="key">Alt</span>+<span class="key">W</span></span>
            <span class="shortcut-description">Bid War</span>
          </div>
          <div class="shortcut-item">
            <span class="shortcut-key"><span class="key">Alt</span>+<span class="key">Q</span></span>
            <span class="shortcut-description">Toggle Simulated Bidding</span>
          </div>
          <div class="shortcut-item">
            <span class="shortcut-key"><span class="key">Alt</span>+<span class="key">T</span></span>
            <span class="shortcut-description">Talk (Speech Recognition)</span>
          </div>
          <div class="shortcut-item">
            <span class="shortcut-key"><span class="key">Alt</span>+<span class="key">S</span></span>
            <span class="shortcut-description">Settings</span>
          </div>
        </div>
      </div>

      <!-- Localization Tab -->
      <div class="tab-content" *ngIf="activeTab === 'localization'">
        <div class="localization-container">
          <div class="localization-section">
            <h4>Language Settings</h4>
            <p class="help-text">Choose your preferred language for the application interface.</p>
            
            <div class="localization-dropdown">
              <label class="form-label">Language</label>
              <select [(ngModel)]="currentLocale" (change)="onLanguageChange()" class="dropdown-select">
                <option *ngFor="let language of availableLanguages" [value]="language.code">
                  {{ language.name }}
                </option>
              </select>
            </div>
          </div>

          <div class="localization-section">
            <h4>Currency Settings</h4>
            <p class="help-text">Choose your preferred currency for price display.</p>
            
            <div class="localization-dropdown">
              <label class="form-label">Currency</label>
              <select [(ngModel)]="selectedCurrencyCode" (change)="onCurrencyChange()" class="dropdown-select">
                <option *ngFor="let currency of availableCurrencies" [value]="currency.code">
                  {{ currency.symbol }} - {{ currency.name }}
                </option>
              </select>
            </div>
          </div>
        </div>
      </div>

      <!-- Data Management Tab -->
      <div class="tab-content" *ngIf="activeTab === 'data'">
        <div class="data-management-container">
          <h4>Data Seeding Tools</h4>
          <p class="help-text">These tools will seed your Supabase database with sample data.</p>
          
          <div class="data-action-item">
            <div class="action-description">
              <h5>Seed Auction Data</h5>
              <p>Populate the auction database with demo auction information.</p>
            </div>
            <button 
              class="button button-primary" 
              (click)="onSeedAuctionData()" 
              [disabled]="isSeedingAuctionData">
              {{ isSeedingAuctionData ? 'Seeding...' : 'Seed Auction Data' }}
            </button>
          </div>

          <div class="data-action-item">
            <div class="action-description">
              <h5>Seed Lots</h5>
              <p>Populate the database with sample auction lots.</p>
            </div>
            <button 
              class="button button-primary" 
              (click)="onSeedLots()" 
              [disabled]="isSeedingLots">
              {{ isSeedingLots ? 'Seeding...' : 'Seed Lots' }}
            </button>
          </div>

          <div class="data-action-item">
            <div class="action-description">
              <h5>Seed Messages</h5>
              <p>Populate the database with sample dealer messages.</p>
            </div>
            <button 
              class="button button-primary" 
              (click)="onSeedMessages()" 
              [disabled]="isSeedingMessages">
              {{ isSeedingMessages ? 'Seeding...' : 'Seed Messages' }}
            </button>
          </div>

          <div class="data-action-item">
            <div class="action-description">
              <h5>Seed Lot User Activity</h5>
              <p>Populate the database with sample viewer, watcher, and lead data.</p>
            </div>
            <button 
              class="button button-primary" 
              (click)="onSeedLotUserActivity()" 
              [disabled]="isSeedingActivity">
              {{ isSeedingActivity ? 'Seeding...' : 'Seed User Activity' }}
            </button>
          </div>

          <div class="data-action-item">
            <div class="action-description">
              <h5>Seed Localization Content</h5>
              <p>Populate the database with multilingual content for the application.</p>
            </div>
            <button 
              class="button button-primary" 
              (click)="onSeedContent()" 
              [disabled]="isSeedingContent">
              {{ isSeedingContent ? 'Seeding...' : 'Seed Content' }}
            </button>
          </div>

          <div class="data-action-item">
            <div class="action-description">
              <h5>Seed Header Content</h5>
              <p>Populate the database with header-specific localization content.</p>
            </div>
            <button 
              class="button button-primary" 
              (click)="onSeedHeaderContent()" 
              [disabled]="isSeedingHeaderContent">
              {{ isSeedingHeaderContent ? 'Seeding...' : 'Seed Header Content' }}
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>